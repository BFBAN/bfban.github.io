(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{70:function(t,s,a){"use strict";a.r(s);var e=a(3),n=a(2),r={data:function(){return{signup:{username:"",password:"",originId:"",qq:"",captcha:""},spinShow:!1}},methods:{refreshCaptcha:function(){this.$refs.captcha.src=n.a+"/captcha?r="+Math.random(),e.n.call(this.$refs.reCaptcha)},handleSignup:function(){var t=this,s=_.each(this.signup,(function(t,s,a){a[s]=t.trim()})),a=s.username,r=s.password,i=s.originId,p=s.qq,o=s.captcha;a&&!Object(e.l)(a)&&r&&!Object(e.l)(r)&&4===o.length?(this.spinShow=!0,Object(n.b)({method:"post",url:"/account/signup",headers:{},data:{username:a,password:r,captcha:o,originId:i,qq:p}}).then((function(s){t.spinShow=!1;var a=s.data;1===a.error?(t.$Message.error("注册失败 "+a.msg),t.signup.password="",t.signup.captcha="",t.refreshCaptcha()):t.$store.dispatch("signin",a.data).then((function(){t.$router.push("/")}))}))):this.$Message.error("请规范填写")}}},i=a(1),p=Object(i.a)(r,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"container"},[a("div",{staticClass:"content"},[a("Form",{staticStyle:{position:"relative"},attrs:{"label-width":80}},[a("Divider",[t._v(t._s(t.$t("signup.title")))]),t._v(" "),a("FormItem",{attrs:{label:t.$t("signup.form.username")}},[a("Input",{attrs:{placeholder:"4位以上用户名"},model:{value:t.signup.username,callback:function(s){t.$set(t.signup,"username",s)},expression:"signup.username"}})],1),t._v(" "),a("FormItem",{attrs:{label:t.$t("signup.form.password")}},[a("Input",{attrs:{type:"password",placeholder:"6位以上密码"},model:{value:t.signup.password,callback:function(s){t.$set(t.signup,"password",s)},expression:"signup.password"}})],1),t._v(" "),a("FormItem",{attrs:{label:t.$t("signup.form.originId")}},[a("Input",{attrs:{placeholder:"选题"},model:{value:t.signup.originId,callback:function(s){t.$set(t.signup,"originId",s)},expression:"signup.originId"}})],1),t._v(" "),a("FormItem",{attrs:{label:t.$t("signup.form.qq")}},[a("Input",{attrs:{placeholder:"选填"},model:{value:t.signup.qq,callback:function(s){t.$set(t.signup,"qq",s)},expression:"signup.qq"}})],1),t._v(" "),a("FormItem",{attrs:{label:t.$t("signup.form.captcha")}},[a("Input",{attrs:{type:"text",placeholder:t.$t("signup.form.captcha")},model:{value:t.signup.captcha,callback:function(s){t.$set(t.signup,"captcha",s)},expression:"signup.captcha"}}),t._v(" "),a("img",{ref:"captcha"}),t._v(" "),a("a",{ref:"reCaptcha",attrs:{href:"#"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.refreshCaptcha(s)}}},[t._v("\n          "+t._s(t.$t("signup.form.getCaptcha"))+"\n        ")])],1),t._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.handleSignup(s)}}},[t._v(t._s(t.$t("signup.form.submit")))]),t._v(" "),a("router-link",{attrs:{to:{name:"signin"}}},[t._v(t._s(t.$t("signup.form.submitHint")))])],1),t._v(" "),a("Spin",{directives:[{name:"show",rawName:"v-show",value:t.spinShow,expression:"spinShow"}],attrs:{size:"large",fix:""}})],1)],1)])}),[],!1,null,null,null);s.default=p.exports}}]);